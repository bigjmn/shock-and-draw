{"ast":null,"code":"import _toConsumableArray from\"/Users/jessenicholas/shock-draw-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/jessenicholas/shock-draw-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import socket from'../../context/socket.js';import Message from'../Message/Message.js';import classes from'./MessageHolder.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MessageHolder=function MessageHolder(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var messagesEndRef=useRef(null);var scrollToBottom=function scrollToBottom(){var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\",block:'nearest'});};useEffect(function(){scrollToBottom();},[messages]);useEffect(function(){socket.on('response',function(data){setMessages(function(oldMessages){return[].concat(_toConsumableArray(oldMessages),[data]);});});socket.on('attackBounce',function(){socket.emit('giveAttack');});return function(){socket.off('response');socket.off('attackBounce');};});return/*#__PURE__*/_jsxs(\"div\",{className:classes.messageWrapper,children:[messages.map(function(message,i){return/*#__PURE__*/_jsx(Message,{message:message},i);}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})})]});};export default MessageHolder;","map":{"version":3,"sources":["/Users/jessenicholas/shock-draw-final/client/src/components/MessageHolder/MessageHolder.js"],"names":["React","useState","useEffect","useRef","socket","Message","classes","MessageHolder","messages","setMessages","messagesEndRef","scrollToBottom","current","scrollIntoView","behavior","block","on","data","oldMessages","emit","off","messageWrapper","map","message","i"],"mappings":"8UAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,CAAoCC,MAApC,KAAiD,OAAjD,CACA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,4BAApB,C,wFAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAE1B,cAAgCN,QAAQ,CAAC,EAAD,CAAxC,wCAAOO,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,CAAAA,cAAc,CAAGP,MAAM,CAAC,IAAD,CAA7B,CAEA,GAAMQ,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,2BAC3B,uBAAAD,cAAc,CAACE,OAAf,sEAAwBC,cAAxB,CAAuC,CAAEC,QAAQ,CAAE,QAAZ,CAAsBC,KAAK,CAAE,SAA7B,CAAvC,EACD,CAFD,CAIFb,SAAS,CAAC,UAAM,CACdS,cAAc,GACf,CAFQ,CAEN,CAACH,QAAD,CAFM,CAAT,CAIEN,SAAS,CAAC,UAAM,CACdE,MAAM,CAACY,EAAP,CAAU,UAAV,CAAsB,SAACC,IAAD,CAAU,CAC9BR,WAAW,CAAC,SAACS,WAAD,qCAAqBA,WAArB,GAAkCD,IAAlC,IAAD,CAAX,CAED,CAHD,EAIAb,MAAM,CAACY,EAAP,CAAU,cAAV,CAA0B,UAAM,CAC9BZ,MAAM,CAACe,IAAP,CAAY,YAAZ,EACD,CAFD,EAIA,MAAO,WAAM,CACXf,MAAM,CAACgB,GAAP,CAAW,UAAX,EACAhB,MAAM,CAACgB,GAAP,CAAW,cAAX,EACD,CAHD,CAID,CAbQ,CAAT,CAeA,mBACE,aAAK,SAAS,CAAEd,OAAO,CAACe,cAAxB,WACGb,QAAQ,CAACc,GAAT,CAAa,SAACC,OAAD,CAAUC,CAAV,qBAEV,KAAC,OAAD,EAAiB,OAAO,CAAED,OAA1B,EAAcC,CAAd,CAFU,EAAb,CADH,cAOE,kCAAK,YAAK,GAAG,CAAEd,cAAV,EAAL,EAPF,GADF,CAWD,CAxCD,CA0CA,cAAeH,CAAAA,aAAf","sourcesContent":["import React, {useState, useEffect, useRef} from 'react'\nimport socket from '../../context/socket.js'\nimport Message from '../Message/Message.js'\nimport classes from './MessageHolder.module.css'\n\nconst MessageHolder = () => {\n\n  const [messages, setMessages] = useState([])\n\n  const messagesEndRef = useRef(null)\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\", block: 'nearest' })\n  }\n\nuseEffect(() => {\n  scrollToBottom()\n}, [messages]);\n\n  useEffect(() => {\n    socket.on('response', (data) => {\n      setMessages((oldMessages) => [...oldMessages, data])\n\n    })\n    socket.on('attackBounce', () => {\n      socket.emit('giveAttack')\n    })\n\n    return () => {\n      socket.off('response')\n      socket.off('attackBounce')\n    }\n  })\n\n  return(\n    <div className={classes.messageWrapper}>\n      {messages.map((message, i) => (\n\n          <Message key={i} message={message}/>\n\n      ))}\n\n      <div><div ref={messagesEndRef} /></div>\n    </div>\n  )\n}\n\nexport default MessageHolder\n"]},"metadata":{},"sourceType":"module"}