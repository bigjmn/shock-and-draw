{"ast":null,"code":"import _slicedToArray from\"/Users/jessenicholas/shock-draw-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import PeepCanvas from\"../PeepCanvas/PeepCanvas\";import FadeControl from'../FadeControl/FadeControl.js';import socket from'../../context/socket.js';import classes from'./RecCanvas.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RecCanvas=function RecCanvas(_ref){var word=_ref.word;var canvasRef=React.useRef(null);var parentRef=React.useRef(null);var _useState=useState({}),_useState2=_slicedToArray(_useState,2),ctx=_useState2[0],setCtx=_useState2[1];var _useState3=useState({x:0,y:0}),_useState4=_slicedToArray(_useState3,2),canvasOffset=_useState4[0],setCanvasOffset=_useState4[1];var _useState5=useState({x:0,y:0}),_useState6=_slicedToArray(_useState5,2),position=_useState6[0],setPosition=_useState6[1];var _useState7=useState(\"#000000\"),_useState8=_slicedToArray(_useState7,2),color=_useState8[0],setColor=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),peepingtom=_useState10[0],setPeepingtom=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),fading=_useState12[0],setFading=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),frozen=_useState14[0],setFrozen=_useState14[1];var handlePack=function handlePack(payload){ctx.strokeStyle=payload.color;ctx.lineWidth=payload.thickness;ctx.beginPath();ctx.moveTo(payload.oldx,payload.oldy);ctx.lineTo(payload.newx,payload.newy);ctx.stroke();};var handleDot=function handleDot(payload){ctx.fillStyle=payload.color;ctx.beginPath();ctx.arc(payload.centerx,payload.centery,payload.thickness/2,0,2*Math.PI);ctx.fill();ctx.closePath();};var fadeCanvas=function fadeCanvas(){if(frozen){return;}ctx.fillStyle=\"rgb(255,255,255,0.03)\";ctx.fillRect(0,0,500,500);};var correctSign=function correctSign(){ctx.fillStyle='black';ctx.fillRect(90,90,320,220);ctx.fillStyle='white';ctx.fillRect(100,100,300,200);ctx.fillStyle='black';ctx.font='bold 42px serif';ctx.textAlign='center';ctx.fillText('correct!',250,140);ctx.fillStyle='green';ctx.font='bold 42px serif';ctx.fillText(word+' ✔',250,260);};var passSign=function passSign(){ctx.fillStyle='black';ctx.fillRect(90,90,320,220);ctx.fillStyle='white';ctx.fillRect(100,100,300,200);ctx.fillStyle='black';ctx.font='bold 42px serif';ctx.textAlign='center';ctx.fillText('PASS',250,140);ctx.font='bold 42px serif';ctx.fillText(word+' ❌',250,260);};useEffect(function(){socket.on('takePacket',function(data){handlePack(data.payload);});socket.on('takeDot',function(data){handleDot(data.payload);});socket.on('takeClear',function(){ctx.clearRect(0,0,500,500);setFrozen(false);});socket.on('peepingtom',function(){setPeepingtom(true);});socket.on('peepingtomclear',function(){setPeepingtom(false);});socket.on('canfade',function(){setFading(true);});socket.on('canfadeclear',function(){setFading(false);});socket.on('correct',function(){correctSign();setFrozen(true);});socket.on('passmessage',function(){passSign();setFrozen(true);});return function(){socket.off('takePacket');socket.off('takeDot');socket.off('takeClear');socket.off('peepingtom');socket.off('peepingtomclear');socket.off('canfade');socket.off('canfadeclear');socket.off('correct');socket.off('passmessage');};});useEffect(function(){var canv=canvasRef.current;canv.width=parentRef.current.offsetWidth;canv.height=parentRef.current.offsetHeight;var canvCtx=canv.getContext(\"2d\");canvCtx.lineJoin=\"round\";canvCtx.lineCap=\"round\";canvCtx.lineWidth=5;setCtx(canvCtx);var offset=canv.getBoundingClientRect();setCanvasOffset({x:parseInt(offset.left),y:parseInt(offset.top)});},[ctx]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.boardContainer,ref:parentRef,children:[/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,style:{border:\"1px solid\",height:'500px',width:'500px'}}),/*#__PURE__*/_jsx(\"div\",{className:classes.peepContainer,children:peepingtom&&/*#__PURE__*/_jsx(PeepCanvas,{})})]}),fading&&/*#__PURE__*/_jsx(FadeControl,{fadeCanvas:fadeCanvas})]});};export default RecCanvas;","map":{"version":3,"sources":["/Users/jessenicholas/shock-draw-final/client/src/components/RecCanvas/RecCanvas.js"],"names":["React","useState","useEffect","PeepCanvas","FadeControl","socket","classes","RecCanvas","word","canvasRef","useRef","parentRef","ctx","setCtx","x","y","canvasOffset","setCanvasOffset","position","setPosition","color","setColor","peepingtom","setPeepingtom","fading","setFading","frozen","setFrozen","handlePack","payload","strokeStyle","lineWidth","thickness","beginPath","moveTo","oldx","oldy","lineTo","newx","newy","stroke","handleDot","fillStyle","arc","centerx","centery","Math","PI","fill","closePath","fadeCanvas","fillRect","correctSign","font","textAlign","fillText","passSign","on","data","clearRect","off","canv","current","width","offsetWidth","height","offsetHeight","canvCtx","getContext","lineJoin","lineCap","offset","getBoundingClientRect","parseInt","left","top","boardContainer","border","peepContainer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PeepCanvas from \"../PeepCanvas/PeepCanvas\";\nimport FadeControl from '../FadeControl/FadeControl.js'\nimport socket from '../../context/socket.js'\nimport classes from './RecCanvas.module.css'\n\n\nconst RecCanvas = ({word}) => {\n  const canvasRef = React.useRef(null);\n  const parentRef = React.useRef(null);\n  const [ctx, setCtx] = useState({});\n  const [canvasOffset, setCanvasOffset] = useState({ x: 0, y: 0 });\n\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const [color, setColor] = useState(\"#000000\");\n\n  const [peepingtom, setPeepingtom] = useState(false)\n  const [fading, setFading] = useState(false)\n  const [frozen, setFrozen] = useState(false)\n\n\n\n  const handlePack = (payload) => {\n    ctx.strokeStyle = payload.color\n    ctx.lineWidth = payload.thickness\n    ctx.beginPath()\n    ctx.moveTo(payload.oldx, payload.oldy)\n    ctx.lineTo(payload.newx, payload.newy)\n    ctx.stroke()\n  }\n  const handleDot = (payload) => {\n    ctx.fillStyle = payload.color\n    ctx.beginPath()\n    ctx.arc(payload.centerx, payload.centery, payload.thickness/2, 0, 2*Math.PI)\n    ctx.fill()\n    ctx.closePath()\n  }\n\n  const fadeCanvas = () => {\n    if (frozen){\n      return\n    }\n    ctx.fillStyle = \"rgb(255,255,255,0.03)\"\n    ctx.fillRect(0,0,500,500)\n  }\n\n  const correctSign = () => {\n    ctx.fillStyle = 'black'\n    ctx.fillRect(90, 90, 320, 220)\n    ctx.fillStyle = 'white'\n    ctx.fillRect(100,100,300,200)\n    ctx.fillStyle = 'black'\n    ctx.font = 'bold 42px serif'\n    ctx.textAlign = 'center'\n    ctx.fillText('correct!', 250, 140)\n    ctx.fillStyle = 'green'\n    ctx.font = 'bold 42px serif'\n    ctx.fillText(word+' ✔', 250, 260)\n  }\n  const passSign = () =>{\n    ctx.fillStyle = 'black'\n    ctx.fillRect(90, 90, 320, 220)\n    ctx.fillStyle = 'white'\n    ctx.fillRect(100,100,300,200)\n    ctx.fillStyle = 'black'\n    ctx.font = 'bold 42px serif'\n    ctx.textAlign = 'center'\n    ctx.fillText('PASS', 250, 140)\n    ctx.font = 'bold 42px serif'\n    ctx.fillText(word+' ❌', 250, 260)\n\n  }\n  useEffect(() => {\n    socket.on('takePacket', (data) => {\n\n      handlePack(data.payload)\n    })\n    socket.on('takeDot', (data) => {\n      handleDot(data.payload)\n    })\n    socket.on('takeClear', () => {\n      ctx.clearRect(0,0,500,500)\n      setFrozen(false)\n    })\n    socket.on('peepingtom', () => {\n      setPeepingtom(true)\n    })\n    socket.on('peepingtomclear', () => {\n      setPeepingtom(false)\n    })\n    socket.on('canfade', () => {\n      setFading(true)\n    })\n    socket.on('canfadeclear', () => {\n      setFading(false)\n    })\n    socket.on('correct', () => {\n      correctSign()\n      setFrozen(true)\n    })\n    socket.on('passmessage', () => {\n      passSign()\n      setFrozen(true)\n    })\n    return () => {\n      socket.off('takePacket')\n      socket.off('takeDot')\n      socket.off('takeClear')\n      socket.off('peepingtom')\n      socket.off('peepingtomclear')\n      socket.off('canfade')\n      socket.off('canfadeclear')\n      socket.off('correct')\n      socket.off('passmessage')\n    }\n  })\n\n\n  useEffect(() => {\n    let canv = canvasRef.current;\n    canv.width = parentRef.current.offsetWidth;\n    canv.height = parentRef.current.offsetHeight;\n\n    let canvCtx = canv.getContext(\"2d\");\n    canvCtx.lineJoin = \"round\";\n    canvCtx.lineCap = \"round\";\n    canvCtx.lineWidth = 5;\n    setCtx(canvCtx);\n\n    let offset = canv.getBoundingClientRect();\n    setCanvasOffset({ x: parseInt(offset.left), y: parseInt(offset.top) });\n  }, [ctx]);\n\n\n\n\n\n  return (\n    <div>\n\n\n\n\n    <div className={classes.boardContainer} ref={parentRef}>\n\n\n\n      <canvas\n        ref={canvasRef}\n\n\n\n\n\n        style={{border:\"1px solid\", height:'500px', width:'500px'}}\n\n      />\n      <div className={classes.peepContainer}>\n        {peepingtom && <PeepCanvas />}\n      </div>\n\n\n\n    </div>\n\n    {fading && <FadeControl fadeCanvas={fadeCanvas}/>}\n\n    </div>\n\n  );\n\n}\n\nexport default RecCanvas;\n"]},"metadata":{},"sourceType":"module"}