{"ast":null,"code":"import _slicedToArray from\"/Users/jessenicholas/shock-draw-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import PeepCanvas from\"../PeepCanvas/PeepCanvas\";import socket from'../../context/socket.js';import classes from'./RecCanvas.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RecCanvas=function RecCanvas(){var canvasRef=React.useRef(null);var parentRef=React.useRef(null);var _useState=useState({}),_useState2=_slicedToArray(_useState,2),ctx=_useState2[0],setCtx=_useState2[1];var _useState3=useState({x:0,y:0}),_useState4=_slicedToArray(_useState3,2),canvasOffset=_useState4[0],setCanvasOffset=_useState4[1];var _useState5=useState({x:0,y:0}),_useState6=_slicedToArray(_useState5,2),position=_useState6[0],setPosition=_useState6[1];var _useState7=useState(\"#000000\"),_useState8=_slicedToArray(_useState7,2),color=_useState8[0],setColor=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),peepingtom=_useState10[0],setPeepingtom=_useState10[1];var handlePack=function handlePack(payload){ctx.strokeStyle=payload.color;ctx.lineWidth=payload.thickness;ctx.beginPath();ctx.moveTo(payload.oldx,payload.oldy);ctx.lineTo(payload.newx,payload.newy);ctx.stroke();};var handleDot=function handleDot(payload){ctx.fillStyle=payload.color;ctx.beginPath();ctx.arc(payload.centerx,payload.centery,payload.thickness/2,0,2*Math.PI);ctx.fill();ctx.closePath();};useEffect(function(){socket.on('takePacket',function(data){handlePack(data.payload);});socket.on('takeDot',function(data){handleDot(data.payload);});socket.on('takeClear',function(){ctx.clearRect(0,0,500,500);});socket.on('peepingtom',function(){setPeepingtom(true);});socket.on('peepingtomclear',function(){setPeepingtom(false);});return function(){socket.off('takePacket');socket.off('takeDot');socket.off('takeClear');socket.off('peepingtom');socket.off('peepingtomclear');};});useEffect(function(){var canv=canvasRef.current;canv.width=parentRef.current.offsetWidth;canv.height=parentRef.current.offsetHeight;var canvCtx=canv.getContext(\"2d\");canvCtx.lineJoin=\"round\";canvCtx.lineCap=\"round\";canvCtx.lineWidth=5;setCtx(canvCtx);var offset=canv.getBoundingClientRect();setCanvasOffset({x:parseInt(offset.left),y:parseInt(offset.top)});},[ctx]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.boardContainer,ref:parentRef,children:[/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,height:\"500\",width:\"500\",style:{border:\"1px solid\",position:'absolute'}}),/*#__PURE__*/_jsx(\"div\",{className:classes.peepContainer,children:peepingtom&&/*#__PURE__*/_jsx(PeepCanvas,{})})]})});};export default RecCanvas;","map":{"version":3,"sources":["/Users/jessenicholas/shock-draw-final/client/src/components/RecCanvas/RecCanvas.js"],"names":["React","useState","useEffect","PeepCanvas","socket","classes","RecCanvas","canvasRef","useRef","parentRef","ctx","setCtx","x","y","canvasOffset","setCanvasOffset","position","setPosition","color","setColor","peepingtom","setPeepingtom","handlePack","payload","strokeStyle","lineWidth","thickness","beginPath","moveTo","oldx","oldy","lineTo","newx","newy","stroke","handleDot","fillStyle","arc","centerx","centery","Math","PI","fill","closePath","on","data","clearRect","off","canv","current","width","offsetWidth","height","offsetHeight","canvCtx","getContext","lineJoin","lineCap","offset","getBoundingClientRect","parseInt","left","top","boardContainer","border","peepContainer"],"mappings":"mKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,wBAApB,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,GAAMC,CAAAA,SAAS,CAAGP,KAAK,CAACQ,MAAN,CAAa,IAAb,CAAlB,CACA,GAAMC,CAAAA,SAAS,CAAGT,KAAK,CAACQ,MAAN,CAAa,IAAb,CAAlB,CACA,cAAsBP,QAAQ,CAAC,EAAD,CAA9B,wCAAOS,GAAP,eAAYC,MAAZ,eACA,eAAwCV,QAAQ,CAAC,CAAEW,CAAC,CAAE,CAAL,CAAQC,CAAC,CAAE,CAAX,CAAD,CAAhD,yCAAOC,YAAP,eAAqBC,eAArB,eAEA,eAAgCd,QAAQ,CAAC,CAAEW,CAAC,CAAE,CAAL,CAAQC,CAAC,CAAE,CAAX,CAAD,CAAxC,yCAAOG,QAAP,eAAiBC,WAAjB,eACA,eAA0BhB,QAAQ,CAAC,SAAD,CAAlC,yCAAOiB,KAAP,eAAcC,QAAd,eAEA,eAAoClB,QAAQ,CAAC,KAAD,CAA5C,0CAAOmB,UAAP,gBAAmBC,aAAnB,gBAIA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,OAAD,CAAa,CAC9Bb,GAAG,CAACc,WAAJ,CAAkBD,OAAO,CAACL,KAA1B,CACAR,GAAG,CAACe,SAAJ,CAAgBF,OAAO,CAACG,SAAxB,CACAhB,GAAG,CAACiB,SAAJ,GACAjB,GAAG,CAACkB,MAAJ,CAAWL,OAAO,CAACM,IAAnB,CAAyBN,OAAO,CAACO,IAAjC,EACApB,GAAG,CAACqB,MAAJ,CAAWR,OAAO,CAACS,IAAnB,CAAyBT,OAAO,CAACU,IAAjC,EACAvB,GAAG,CAACwB,MAAJ,GACD,CAPD,CAQA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACZ,OAAD,CAAa,CAC7Bb,GAAG,CAAC0B,SAAJ,CAAgBb,OAAO,CAACL,KAAxB,CACAR,GAAG,CAACiB,SAAJ,GACAjB,GAAG,CAAC2B,GAAJ,CAAQd,OAAO,CAACe,OAAhB,CAAyBf,OAAO,CAACgB,OAAjC,CAA0ChB,OAAO,CAACG,SAAR,CAAkB,CAA5D,CAA+D,CAA/D,CAAkE,EAAEc,IAAI,CAACC,EAAzE,EACA/B,GAAG,CAACgC,IAAJ,GACAhC,GAAG,CAACiC,SAAJ,GACD,CAND,CAOAzC,SAAS,CAAC,UAAM,CACdE,MAAM,CAACwC,EAAP,CAAU,YAAV,CAAwB,SAACC,IAAD,CAAU,CAEhCvB,UAAU,CAACuB,IAAI,CAACtB,OAAN,CAAV,CACD,CAHD,EAIAnB,MAAM,CAACwC,EAAP,CAAU,SAAV,CAAqB,SAACC,IAAD,CAAU,CAC7BV,SAAS,CAACU,IAAI,CAACtB,OAAN,CAAT,CACD,CAFD,EAGAnB,MAAM,CAACwC,EAAP,CAAU,WAAV,CAAuB,UAAM,CAC3BlC,GAAG,CAACoC,SAAJ,CAAc,CAAd,CAAgB,CAAhB,CAAkB,GAAlB,CAAsB,GAAtB,EACD,CAFD,EAGA1C,MAAM,CAACwC,EAAP,CAAU,YAAV,CAAwB,UAAM,CAC5BvB,aAAa,CAAC,IAAD,CAAb,CACD,CAFD,EAGAjB,MAAM,CAACwC,EAAP,CAAU,iBAAV,CAA6B,UAAM,CACjCvB,aAAa,CAAC,KAAD,CAAb,CACD,CAFD,EAGA,MAAO,WAAM,CACXjB,MAAM,CAAC2C,GAAP,CAAW,YAAX,EACA3C,MAAM,CAAC2C,GAAP,CAAW,SAAX,EACA3C,MAAM,CAAC2C,GAAP,CAAW,WAAX,EACA3C,MAAM,CAAC2C,GAAP,CAAW,YAAX,EACA3C,MAAM,CAAC2C,GAAP,CAAW,iBAAX,EACD,CAND,CAOD,CAxBQ,CAAT,CA2BA7C,SAAS,CAAC,UAAM,CACd,GAAI8C,CAAAA,IAAI,CAAGzC,SAAS,CAAC0C,OAArB,CACAD,IAAI,CAACE,KAAL,CAAazC,SAAS,CAACwC,OAAV,CAAkBE,WAA/B,CACAH,IAAI,CAACI,MAAL,CAAc3C,SAAS,CAACwC,OAAV,CAAkBI,YAAhC,CAEA,GAAIC,CAAAA,OAAO,CAAGN,IAAI,CAACO,UAAL,CAAgB,IAAhB,CAAd,CACAD,OAAO,CAACE,QAAR,CAAmB,OAAnB,CACAF,OAAO,CAACG,OAAR,CAAkB,OAAlB,CACAH,OAAO,CAAC7B,SAAR,CAAoB,CAApB,CACAd,MAAM,CAAC2C,OAAD,CAAN,CAEA,GAAII,CAAAA,MAAM,CAAGV,IAAI,CAACW,qBAAL,EAAb,CACA5C,eAAe,CAAC,CAAEH,CAAC,CAAEgD,QAAQ,CAACF,MAAM,CAACG,IAAR,CAAb,CAA4BhD,CAAC,CAAE+C,QAAQ,CAACF,MAAM,CAACI,GAAR,CAAvC,CAAD,CAAf,CACD,CAbQ,CAaN,CAACpD,GAAD,CAbM,CAAT,CAiBA,mBACE,kCAKA,aAAK,SAAS,CAAEL,OAAO,CAAC0D,cAAxB,CAAwC,GAAG,CAAEtD,SAA7C,wBAIE,eACE,GAAG,CAAEF,SADP,CAIE,MAAM,CAAC,KAJT,CAIe,KAAK,CAAC,KAJrB,CAOE,KAAK,CAAE,CAACyD,MAAM,CAAC,WAAR,CAAoBhD,QAAQ,CAAC,UAA7B,CAPT,EAJF,cAcE,YAAK,SAAS,CAAEX,OAAO,CAAC4D,aAAxB,UACG7C,UAAU,eAAI,KAAC,UAAD,IADjB,EAdF,GALA,EADF,CA+BD,CAvGD,CAyGA,cAAed,CAAAA,SAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PeepCanvas from \"../PeepCanvas/PeepCanvas\";\nimport socket from '../../context/socket.js'\nimport classes from './RecCanvas.module.css'\n\nconst RecCanvas = () => {\n  const canvasRef = React.useRef(null);\n  const parentRef = React.useRef(null);\n  const [ctx, setCtx] = useState({});\n  const [canvasOffset, setCanvasOffset] = useState({ x: 0, y: 0 });\n\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const [color, setColor] = useState(\"#000000\");\n\n  const [peepingtom, setPeepingtom] = useState(false)\n\n\n\n  const handlePack = (payload) => {\n    ctx.strokeStyle = payload.color\n    ctx.lineWidth = payload.thickness\n    ctx.beginPath()\n    ctx.moveTo(payload.oldx, payload.oldy)\n    ctx.lineTo(payload.newx, payload.newy)\n    ctx.stroke()\n  }\n  const handleDot = (payload) => {\n    ctx.fillStyle = payload.color\n    ctx.beginPath()\n    ctx.arc(payload.centerx, payload.centery, payload.thickness/2, 0, 2*Math.PI)\n    ctx.fill()\n    ctx.closePath()\n  }\n  useEffect(() => {\n    socket.on('takePacket', (data) => {\n\n      handlePack(data.payload)\n    })\n    socket.on('takeDot', (data) => {\n      handleDot(data.payload)\n    })\n    socket.on('takeClear', () => {\n      ctx.clearRect(0,0,500,500)\n    })\n    socket.on('peepingtom', () => {\n      setPeepingtom(true)\n    })\n    socket.on('peepingtomclear', () => {\n      setPeepingtom(false)\n    })\n    return () => {\n      socket.off('takePacket')\n      socket.off('takeDot')\n      socket.off('takeClear')\n      socket.off('peepingtom')\n      socket.off('peepingtomclear')\n    }\n  })\n\n\n  useEffect(() => {\n    let canv = canvasRef.current;\n    canv.width = parentRef.current.offsetWidth;\n    canv.height = parentRef.current.offsetHeight;\n\n    let canvCtx = canv.getContext(\"2d\");\n    canvCtx.lineJoin = \"round\";\n    canvCtx.lineCap = \"round\";\n    canvCtx.lineWidth = 5;\n    setCtx(canvCtx);\n\n    let offset = canv.getBoundingClientRect();\n    setCanvasOffset({ x: parseInt(offset.left), y: parseInt(offset.top) });\n  }, [ctx]);\n\n\n\n  return (\n    <div>\n\n\n\n\n    <div className={classes.boardContainer} ref={parentRef}>\n\n\n\n      <canvas\n        ref={canvasRef}\n\n\n        height=\"500\" width=\"500\"\n\n\n        style={{border:\"1px solid\",position:'absolute'}}\n\n      />\n      <div className={classes.peepContainer}>\n        {peepingtom && <PeepCanvas />}\n      </div>\n\n\n    </div>\n\n    </div>\n\n  );\n\n}\n\nexport default RecCanvas;\n"]},"metadata":{},"sourceType":"module"}