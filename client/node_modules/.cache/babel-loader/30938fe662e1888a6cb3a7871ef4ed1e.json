{"ast":null,"code":"var _jsxFileName = \"/Users/jessenicholas/shock-draw-final/client/src/components/Canvas/Canvas.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Controls from \"../Controls/Controls\";\nimport socket from '../../context/socket.js';\nimport classes from './Canvas.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Canvas() {\n  _s();\n\n  const canvasRef = React.useRef(null);\n  const parentRef = React.useRef(null);\n  const [ctx, setCtx] = useState({});\n  const [canvasOffset, setCanvasOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [drawing, setDrawing] = useState(false);\n  const [position, setPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [color, setColor] = useState(\"#000000\");\n  const [thickness, setThickness] = useState(5);\n  const [activeTake, setActiveTake] = useState(false);\n  const [cursorstyle, setCursorstyle] = useState(\"default\"); // const [drawPack, setDrawPack] = useState([])\n  // const addPack = (payload) => {\n  //   setDrawPack((oldPack) =>  [...oldPack, payload])\n  //   console.log(drawPack)\n  // }\n\n  function throttled(delay, fn) {\n    let lastCall = 0;\n    return function () {\n      const now = new Date().getTime();\n\n      if (now - lastCall < delay) {\n        return;\n      }\n\n      lastCall = now;\n      return fn(...arguments);\n    };\n  }\n\n  useEffect(() => {\n    let canv = canvasRef.current;\n    canv.width = parentRef.current.offsetWidth;\n    canv.height = parentRef.current.offsetHeight;\n    let canvCtx = canv.getContext(\"2d\");\n    canvCtx.lineJoin = \"round\";\n    canvCtx.lineCap = \"round\";\n    setCtx(canvCtx);\n    let offset = canv.getBoundingClientRect();\n    setCanvasOffset({\n      x: parseInt(offset.left),\n      y: parseInt(offset.top)\n    });\n  }, [ctx]);\n  useEffect(() => {\n    socket.on('takeClear', () => {\n      ctx.clearRect(0, 0, 500, 500);\n    });\n    socket.on('hidemouse', () => {\n      setCursorstyle('none');\n    });\n    socket.on('hidemouseclear', () => {\n      setCursorstyle('default');\n    });\n    return () => {\n      socket.off('takeClear');\n      socket.off('hidemouse');\n      socket.off('hidemouseclear');\n    };\n  });\n\n  function handleMouseDown(e) {\n    setDrawing(true);\n    setPosition({\n      x: parseInt(e.clientX - canvasOffset.x),\n      y: parseInt(e.clientY - canvasOffset.y)\n    });\n    ctx.fillStyle = color;\n    ctx.beginPath();\n    ctx.arc(position.x, position.y, thickness / 2, 0, 2 * Math.PI);\n    ctx.fill();\n    ctx.closePath();\n    let payload = {\n      centerx: position.x,\n      centery: position.y,\n      color: color,\n      thickness: thickness\n    };\n    socket.emit('sendDot', {\n      payload: payload\n    });\n  }\n\n  function handleMouseUp() {\n    setDrawing(false);\n  }\n\n  function handleMouseOut() {\n    setDrawing(false);\n  }\n\n  const handleMouseMove = e => {\n    let mousex = e.clientX - canvasOffset.x;\n    let mousey = e.clientY - canvasOffset.y;\n\n    if (drawing) {\n      ctx.strokeStyle = color;\n      ctx.lineWidth = thickness;\n      ctx.beginPath();\n      ctx.moveTo(position.x, position.y);\n      ctx.lineTo(mousex, mousey);\n      ctx.stroke();\n      var payload = {\n        oldx: position.x,\n        oldy: position.y,\n        newx: mousex,\n        newy: mousey,\n        color: color,\n        thickness: thickness\n      };\n      socket.emit('sendPack', {\n        payload: payload\n      });\n    }\n\n    setPosition({\n      x: mousex,\n      y: mousey\n    });\n  };\n\n  const throttledhandleMouseMove = throttled(50, handleMouseMove);\n\n  function handleColor(color) {\n    setColor(color);\n  }\n\n  const handleSize = size => {\n    setThickness(size);\n  };\n\n  const handleTaker = () => {\n    setActiveTake(!activeTake);\n    console.log(activeTake);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.boardContainer,\n    ref: parentRef,\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      onMouseDown: handleMouseDown,\n      onMouseUp: handleMouseUp,\n      onMouseMove: throttledhandleMouseMove,\n      onMouseOut: handleMouseOut,\n      height: \"500\",\n      width: \"500\",\n      style: {\n        border: \"1px solid\",\n        cursor: cursorstyle\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.controlContainer,\n      children: /*#__PURE__*/_jsxDEV(Controls, {\n        handleColor: handleColor,\n        handleSize: handleSize,\n        activeTake: activeTake\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Canvas, \"qCT2/VITudF8i5O1O7MR2WimNaw=\");\n\n_c = Canvas;\nexport default Canvas;\n\nvar _c;\n\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"sources":["/Users/jessenicholas/shock-draw-final/client/src/components/Canvas/Canvas.js"],"names":["React","useState","useEffect","Controls","socket","classes","Canvas","canvasRef","useRef","parentRef","ctx","setCtx","canvasOffset","setCanvasOffset","x","y","drawing","setDrawing","position","setPosition","color","setColor","thickness","setThickness","activeTake","setActiveTake","cursorstyle","setCursorstyle","throttled","delay","fn","lastCall","now","Date","getTime","canv","current","width","offsetWidth","height","offsetHeight","canvCtx","getContext","lineJoin","lineCap","offset","getBoundingClientRect","parseInt","left","top","on","clearRect","off","handleMouseDown","e","clientX","clientY","fillStyle","beginPath","arc","Math","PI","fill","closePath","payload","centerx","centery","emit","handleMouseUp","handleMouseOut","handleMouseMove","mousex","mousey","strokeStyle","lineWidth","moveTo","lineTo","stroke","oldx","oldy","newx","newy","throttledhandleMouseMove","handleColor","handleSize","size","handleTaker","console","log","boardContainer","border","cursor","controlContainer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Controls from \"../Controls/Controls\";\nimport socket from '../../context/socket.js'\n\nimport classes from './Canvas.module.css'\n\nfunction Canvas() {\n  const canvasRef = React.useRef(null);\n  const parentRef = React.useRef(null);\n  const [ctx, setCtx] = useState({});\n  const [canvasOffset, setCanvasOffset] = useState({ x: 0, y: 0 });\n  const [drawing, setDrawing] = useState(false);\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const [color, setColor] = useState(\"#000000\");\n  const [thickness, setThickness] = useState(5)\n  const [activeTake, setActiveTake] = useState(false)\n\n  const [cursorstyle, setCursorstyle] = useState(\"default\")\n\n\n  // const [drawPack, setDrawPack] = useState([])\n\n\n\n\n  // const addPack = (payload) => {\n  //   setDrawPack((oldPack) =>  [...oldPack, payload])\n  //   console.log(drawPack)\n  // }\n  function throttled(delay, fn) {\n  let lastCall = 0;\n  return function (...args) {\n    const now = (new Date).getTime();\n    if (now - lastCall < delay) {\n      return;\n    }\n    lastCall = now;\n    return fn(...args);\n  }\n}\n\n\n\n\n\n\n\n\n\n\n  useEffect(() => {\n    let canv = canvasRef.current;\n    canv.width = parentRef.current.offsetWidth;\n    canv.height = parentRef.current.offsetHeight;\n\n    let canvCtx = canv.getContext(\"2d\");\n    canvCtx.lineJoin = \"round\";\n    canvCtx.lineCap = \"round\";\n\n    setCtx(canvCtx);\n\n    let offset = canv.getBoundingClientRect();\n    setCanvasOffset({ x: parseInt(offset.left), y: parseInt(offset.top) });\n  }, [ctx]);\n\n  useEffect(() => {\n    socket.on('takeClear', () => {\n      ctx.clearRect(0,0,500,500)\n    })\n    socket.on('hidemouse', () => {\n      setCursorstyle('none')\n    })\n    socket.on('hidemouseclear', () => {\n      setCursorstyle('default')\n    })\n    return () => {\n      socket.off('takeClear')\n      socket.off('hidemouse')\n      socket.off('hidemouseclear')\n    }\n  })\n\n  function handleMouseDown(e) {\n    setDrawing(true);\n    setPosition({\n      x: parseInt(e.clientX - canvasOffset.x),\n      y: parseInt(e.clientY - canvasOffset.y),\n    });\n    ctx.fillStyle = color\n\n    ctx.beginPath()\n    ctx.arc(position.x, position.y, thickness/2, 0, 2*Math.PI)\n    ctx.fill()\n    ctx.closePath()\n    let payload = {\n      centerx: position.x,\n      centery: position.y,\n      color: color,\n      thickness: thickness\n\n    }\n    socket.emit('sendDot', {payload:payload})\n  }\n  function handleMouseUp() {\n    setDrawing(false);\n  }\n  function handleMouseOut() {\n    setDrawing(false);\n  }\n\n  const handleMouseMove = (e) => {\n    let mousex = e.clientX - canvasOffset.x;\n    let mousey = e.clientY - canvasOffset.y;\n    if (drawing) {\n      ctx.strokeStyle = color;\n      ctx.lineWidth = thickness;\n      ctx.beginPath();\n      ctx.moveTo(position.x, position.y);\n      ctx.lineTo(mousex, mousey);\n      ctx.stroke();\n      var payload = {\n        oldx: position.x,\n        oldy: position.y,\n        newx: mousex,\n        newy: mousey,\n        color: color,\n        thickness: thickness\n      }\n\n      socket.emit('sendPack', {payload:payload})\n\n    }\n    setPosition({ x: mousex, y: mousey });\n  }\n\n  const throttledhandleMouseMove = throttled(50, handleMouseMove)\n\n  function handleColor(color) {\n    setColor(color);\n  }\n  const handleSize = (size) => {\n    setThickness(size)\n  }\n  const handleTaker = () => {\n\n    setActiveTake(!activeTake)\n    console.log(activeTake)\n  }\n\n  return (\n\n\n\n    <div className={classes.boardContainer} ref={parentRef}>\n\n\n\n\n\n      <canvas\n        ref={canvasRef}\n        onMouseDown={handleMouseDown}\n        onMouseUp={handleMouseUp}\n        onMouseMove={throttledhandleMouseMove}\n        onMouseOut={handleMouseOut}\n        height=\"500\" width=\"500\"\n\n\n        style={{border:\"1px solid\", cursor: cursorstyle }}\n\n      />\n      <div className={classes.controlContainer}>\n        <Controls handleColor={handleColor} handleSize={handleSize} activeTake={activeTake}/>\n\n      </div>\n\n    </div>\n\n  );\n\n}\n\nexport default Canvas;\n"]},"metadata":{},"sourceType":"module"}