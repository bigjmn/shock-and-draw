{"ast":null,"code":"import _slicedToArray from\"/Users/jessenicholas/shock-draw-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Controls from\"../Controls/Controls\";import socket from'../../context/socket.js';import{jsx as _jsx}from\"react/jsx-runtime\";var RecCanvas=function RecCanvas(){var canvasRef=React.useRef(null);var parentRef=React.useRef(null);var _useState=useState({}),_useState2=_slicedToArray(_useState,2),ctx=_useState2[0],setCtx=_useState2[1];var _useState3=useState({x:0,y:0}),_useState4=_slicedToArray(_useState3,2),canvasOffset=_useState4[0],setCanvasOffset=_useState4[1];var _useState5=useState({x:0,y:0}),_useState6=_slicedToArray(_useState5,2),position=_useState6[0],setPosition=_useState6[1];var _useState7=useState(\"#000000\"),_useState8=_slicedToArray(_useState7,2),color=_useState8[0],setColor=_useState8[1];var handlePack=function handlePack(payload){ctx.strokeStyle=payload.color;ctx.lineWidth=payload.thickness;ctx.beginPath();ctx.moveTo(payload.oldx,payload.oldy);ctx.lineTo(payload.newx,payload.newy);ctx.stroke();};useEffect(function(){socket.on('takePacket',function(data){handlePack(data.payload);});socket.on('takeClear',function(){ctx.clearRect(0,0,500,500);});return function(){socket.off('takePacket');socket.off('takeClear');};});useEffect(function(){var canv=canvasRef.current;canv.width=parentRef.current.offsetWidth;canv.height=parentRef.current.offsetHeight;var canvCtx=canv.getContext(\"2d\");canvCtx.lineJoin=\"round\";canvCtx.lineCap=\"round\";canvCtx.lineWidth=5;setCtx(canvCtx);var offset=canv.getBoundingClientRect();setCanvasOffset({x:parseInt(offset.left),y:parseInt(offset.top)});},[ctx]);return/*#__PURE__*/_jsx(\"div\",{className:\"board\",ref:parentRef,children:/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,height:\"500\",width:\"500\",style:{border:\"1px solid\"}})});};export default RecCanvas;","map":{"version":3,"sources":["/Users/jessenicholas/shock-draw-final/client/src/components/RecCanvas/RecCanvas.js"],"names":["React","useState","useEffect","Controls","socket","RecCanvas","canvasRef","useRef","parentRef","ctx","setCtx","x","y","canvasOffset","setCanvasOffset","position","setPosition","color","setColor","handlePack","payload","strokeStyle","lineWidth","thickness","beginPath","moveTo","oldx","oldy","lineTo","newx","newy","stroke","on","data","clearRect","off","canv","current","width","offsetWidth","height","offsetHeight","canvCtx","getContext","lineJoin","lineCap","offset","getBoundingClientRect","parseInt","left","top","border"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Controls from \"../Controls/Controls\";\nimport socket from '../../context/socket.js'\n\nconst RecCanvas = () => {\n  const canvasRef = React.useRef(null);\n  const parentRef = React.useRef(null);\n  const [ctx, setCtx] = useState({});\n  const [canvasOffset, setCanvasOffset] = useState({ x: 0, y: 0 });\n\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const [color, setColor] = useState(\"#000000\");\n\n\n\n  const handlePack = (payload) => {\n    ctx.strokeStyle = payload.color\n    ctx.lineWidth = payload.thickness\n    ctx.beginPath()\n    ctx.moveTo(payload.oldx, payload.oldy)\n    ctx.lineTo(payload.newx, payload.newy)\n    ctx.stroke()\n  }\n  useEffect(() => {\n    socket.on('takePacket', (data) => {\n\n      handlePack(data.payload)\n    })\n    socket.on('takeClear', () => {\n      ctx.clearRect(0,0,500,500)\n    })\n    return () => {\n      socket.off('takePacket')\n      socket.off('takeClear')\n    }\n  })\n\n\n  useEffect(() => {\n    let canv = canvasRef.current;\n    canv.width = parentRef.current.offsetWidth;\n    canv.height = parentRef.current.offsetHeight;\n\n    let canvCtx = canv.getContext(\"2d\");\n    canvCtx.lineJoin = \"round\";\n    canvCtx.lineCap = \"round\";\n    canvCtx.lineWidth = 5;\n    setCtx(canvCtx);\n\n    let offset = canv.getBoundingClientRect();\n    setCanvasOffset({ x: parseInt(offset.left), y: parseInt(offset.top) });\n  }, [ctx]);\n\n\n\n  return (\n\n\n\n    <div className=\"board\" ref={parentRef}>\n\n\n\n      <canvas\n        ref={canvasRef}\n\n        height=\"500\" width=\"500\"\n\n\n        style={{border:\"1px solid\"}}\n\n      />\n\n\n    </div>\n\n  );\n\n}\n\nexport default RecCanvas;\n"]},"metadata":{},"sourceType":"module"}