{"ast":null,"code":"import _slicedToArray from\"/Users/jessenicholas/shock-draw-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";function PeepCanvas(){var canvasRef=React.useRef(null);var parentRef=React.useRef(null);var _useState=useState({}),_useState2=_slicedToArray(_useState,2),ctx=_useState2[0],setCtx=_useState2[1];var _useState3=useState({x:0,y:0}),_useState4=_slicedToArray(_useState3,2),canvasOffset=_useState4[0],setCanvasOffset=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),peeping=_useState6[0],setPeeping=_useState6[1];// const [drawPack, setDrawPack] = useState([])\n// const addPack = (payload) => {\n//   setDrawPack((oldPack) =>  [...oldPack, payload])\n//   console.log(drawPack)\n// }\nfunction throttled(delay,fn){var lastCall=0;return function(){var now=new Date().getTime();if(now-lastCall<delay){return;}lastCall=now;return fn.apply(void 0,arguments);};}useEffect(function(){var canv=canvasRef.current;canv.width=parentRef.current.offsetWidth;canv.height=parentRef.current.offsetHeight;var canvCtx=canv.getContext(\"2d\");canvCtx.fillStyle=\"black\";setCtx(canvCtx);var offset=canv.getBoundingClientRect();setCanvasOffset({x:parseInt(offset.left),y:parseInt(offset.top)});canvCtx.fillRect(0,0,500,500);},[ctx]);function handleMouseDown(e){setPeeping(true);var mousex=e.clientX-canvasOffset.x;var mousey=e.clientY-canvasOffset.y;ctx.clearRect(mousex-90,mousey-90,180,180);}function handleMouseUp(){setPeeping(false);ctx.fillRect(0,0,500,500);}function handleMouseOut(){setPeeping(false);ctx.fillRect(0,0,500,500);}var handleMouseMove=function handleMouseMove(e){var mousex=e.clientX-canvasOffset.x;var mousey=e.clientY-canvasOffset.y;if(peeping){ctx.fillRect(0,0,500,500);ctx.clearRect(mousex-90,mousey-90,180,180);}};var throttledhandleMouseMove=throttled(50,handleMouseMove);return/*#__PURE__*/_jsx(\"div\",{className:\"PeepCanvas\",ref:parentRef,children:/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,onMouseDown:handleMouseDown,onMouseUp:handleMouseUp,onMouseOut:handleMouseOut,onMouseMove:handleMouseMove,style:{border:\"1px solid\",height:'500px',width:'500px'}})});}export default PeepCanvas;","map":{"version":3,"sources":["/Users/jessenicholas/shock-draw-final/client/src/components/PeepCanvas/PeepCanvas.js"],"names":["React","useState","useEffect","PeepCanvas","canvasRef","useRef","parentRef","ctx","setCtx","x","y","canvasOffset","setCanvasOffset","peeping","setPeeping","throttled","delay","fn","lastCall","now","Date","getTime","canv","current","width","offsetWidth","height","offsetHeight","canvCtx","getContext","fillStyle","offset","getBoundingClientRect","parseInt","left","top","fillRect","handleMouseDown","e","mousex","clientX","mousey","clientY","clearRect","handleMouseUp","handleMouseOut","handleMouseMove","throttledhandleMouseMove","border"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\n\n\nfunction PeepCanvas() {\n  const canvasRef = React.useRef(null);\n  const parentRef = React.useRef(null);\n  const [ctx, setCtx] = useState({});\n  const [canvasOffset, setCanvasOffset] = useState({ x: 0, y: 0 });\n  const [peeping, setPeeping] = useState(false);\n\n\n\n  // const [drawPack, setDrawPack] = useState([])\n\n\n\n\n  // const addPack = (payload) => {\n  //   setDrawPack((oldPack) =>  [...oldPack, payload])\n  //   console.log(drawPack)\n  // }\n  function throttled(delay, fn) {\n  let lastCall = 0;\n  return function (...args) {\n    const now = (new Date).getTime();\n    if (now - lastCall < delay) {\n      return;\n    }\n    lastCall = now;\n    return fn(...args);\n  }\n}\n\n\n\n\n\n\n\n\n\n\n  useEffect(() => {\n    let canv = canvasRef.current;\n    canv.width = parentRef.current.offsetWidth;\n    canv.height = parentRef.current.offsetHeight;\n\n    let canvCtx = canv.getContext(\"2d\");\n    canvCtx.fillStyle = \"black\";\n\n\n    setCtx(canvCtx);\n\n    let offset = canv.getBoundingClientRect();\n    setCanvasOffset({ x: parseInt(offset.left), y: parseInt(offset.top) });\n    canvCtx.fillRect(0,0,500,500)\n\n  }, [ctx]);\n\n\n\n  function handleMouseDown(e) {\n    setPeeping(true);\n    let mousex = e.clientX - canvasOffset.x;\n    let mousey = e.clientY - canvasOffset.y;\n    ctx.clearRect(mousex-90,mousey-90,180,180)\n  }\n  function handleMouseUp() {\n    setPeeping(false);\n    ctx.fillRect(0,0,500,500)\n  }\n  function handleMouseOut() {\n    setPeeping(false);\n    ctx.fillRect(0,0,500,500)\n  }\n\n  const handleMouseMove = (e) => {\n    let mousex = e.clientX - canvasOffset.x;\n    let mousey = e.clientY - canvasOffset.y;\n    if (peeping) {\n      ctx.fillRect(0,0,500,500)\n      ctx.clearRect(mousex-90,mousey-90,180,180)\n\n\n    }\n\n  }\n\n  const throttledhandleMouseMove = throttled(50, handleMouseMove)\n\n\n\n  return (\n\n\n\n    <div className=\"PeepCanvas\" ref={parentRef}>\n\n\n\n\n\n      <canvas\n        ref={canvasRef}\n        onMouseDown={handleMouseDown}\n        onMouseUp={handleMouseUp}\n        onMouseOut={handleMouseOut}\n        onMouseMove={handleMouseMove}\n\n\n\n        style={{border:\"1px solid\", height:'500px', width:'500px' }}\n\n      />\n\n    </div>\n\n  );\n\n}\n\nexport default PeepCanvas;\n"]},"metadata":{},"sourceType":"module"}