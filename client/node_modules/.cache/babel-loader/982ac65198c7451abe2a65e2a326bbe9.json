{"ast":null,"code":"var _jsxFileName = \"/Users/jessenicholas/shock-draw-final/client/src/components/PeepCanvas/PeepCanvas.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PeepCanvas() {\n  _s();\n\n  const canvasRef = React.useRef(null);\n  const parentRef = React.useRef(null);\n  const [ctx, setCtx] = useState({});\n  const [canvasOffset, setCanvasOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [peeping, setPeeping] = useState(false); // const [drawPack, setDrawPack] = useState([])\n  // const addPack = (payload) => {\n  //   setDrawPack((oldPack) =>  [...oldPack, payload])\n  //   console.log(drawPack)\n  // }\n\n  function throttled(delay, fn) {\n    let lastCall = 0;\n    return function () {\n      const now = new Date().getTime();\n\n      if (now - lastCall < delay) {\n        return;\n      }\n\n      lastCall = now;\n      return fn(...arguments);\n    };\n  }\n\n  useEffect(() => {\n    let canv = canvasRef.current;\n    canv.width = parentRef.current.offsetWidth;\n    canv.height = parentRef.current.offsetHeight;\n    let canvCtx = canv.getContext(\"2d\");\n    canvCtx.fillStyle = \"black\";\n    setCtx(canvCtx);\n    let offset = canv.getBoundingClientRect();\n    setCanvasOffset({\n      x: parseInt(offset.left),\n      y: parseInt(offset.top)\n    });\n    canvCtx.fillRect(0, 0, 500, 500);\n  }, [ctx]);\n\n  function handleMouseDown(e) {\n    setPeeping(true);\n    let mousex = e.clientX - canvasOffset.x;\n    let mousey = e.clientY - canvasOffset.y;\n    ctx.clearRect(mousex - 90, mousey - 90, 180, 180);\n  }\n\n  function handleMouseUp() {\n    setPeeping(false);\n    ctx.fillRect(0, 0, 500, 500);\n  }\n\n  function handleMouseOut() {\n    setPeeping(false);\n    ctx.fillRect(0, 0, 500, 500);\n  }\n\n  const handleMouseMove = e => {\n    let mousex = e.clientX - canvasOffset.x;\n    let mousey = e.clientY - canvasOffset.y;\n\n    if (peeping) {\n      ctx.fillRect(0, 0, 500, 500);\n      ctx.clearRect(mousex - 90, mousey - 90, 180, 180);\n    }\n  };\n\n  const throttledhandleMouseMove = throttled(50, handleMouseMove);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"PeepCanvas\",\n    ref: parentRef,\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      onMouseDown: handleMouseDown,\n      onMouseUp: handleMouseUp,\n      onMouseOut: handleMouseOut,\n      onMouseMove: handleMouseMove,\n      height: \"500\",\n      width: \"500\",\n      style: {\n        border: \"1px solid\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PeepCanvas, \"crV5Gf2TYTRkTpFbVThHycfhxRw=\");\n\n_c = PeepCanvas;\nexport default PeepCanvas;\n\nvar _c;\n\n$RefreshReg$(_c, \"PeepCanvas\");","map":{"version":3,"sources":["/Users/jessenicholas/shock-draw-final/client/src/components/PeepCanvas/PeepCanvas.js"],"names":["React","useState","useEffect","PeepCanvas","canvasRef","useRef","parentRef","ctx","setCtx","canvasOffset","setCanvasOffset","x","y","peeping","setPeeping","throttled","delay","fn","lastCall","now","Date","getTime","canv","current","width","offsetWidth","height","offsetHeight","canvCtx","getContext","fillStyle","offset","getBoundingClientRect","parseInt","left","top","fillRect","handleMouseDown","e","mousex","clientX","mousey","clientY","clearRect","handleMouseUp","handleMouseOut","handleMouseMove","throttledhandleMouseMove","border"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\n\n\nfunction PeepCanvas() {\n  const canvasRef = React.useRef(null);\n  const parentRef = React.useRef(null);\n  const [ctx, setCtx] = useState({});\n  const [canvasOffset, setCanvasOffset] = useState({ x: 0, y: 0 });\n  const [peeping, setPeeping] = useState(false);\n\n\n\n  // const [drawPack, setDrawPack] = useState([])\n\n\n\n\n  // const addPack = (payload) => {\n  //   setDrawPack((oldPack) =>  [...oldPack, payload])\n  //   console.log(drawPack)\n  // }\n  function throttled(delay, fn) {\n  let lastCall = 0;\n  return function (...args) {\n    const now = (new Date).getTime();\n    if (now - lastCall < delay) {\n      return;\n    }\n    lastCall = now;\n    return fn(...args);\n  }\n}\n\n\n\n\n\n\n\n\n\n\n  useEffect(() => {\n    let canv = canvasRef.current;\n    canv.width = parentRef.current.offsetWidth;\n    canv.height = parentRef.current.offsetHeight;\n\n    let canvCtx = canv.getContext(\"2d\");\n    canvCtx.fillStyle = \"black\";\n\n\n    setCtx(canvCtx);\n\n    let offset = canv.getBoundingClientRect();\n    setCanvasOffset({ x: parseInt(offset.left), y: parseInt(offset.top) });\n    canvCtx.fillRect(0,0,500,500)\n\n  }, [ctx]);\n\n\n\n  function handleMouseDown(e) {\n    setPeeping(true);\n    let mousex = e.clientX - canvasOffset.x;\n    let mousey = e.clientY - canvasOffset.y;\n    ctx.clearRect(mousex-90,mousey-90,180,180)\n  }\n  function handleMouseUp() {\n    setPeeping(false);\n    ctx.fillRect(0,0,500,500)\n  }\n  function handleMouseOut() {\n    setPeeping(false);\n    ctx.fillRect(0,0,500,500)\n  }\n\n  const handleMouseMove = (e) => {\n    let mousex = e.clientX - canvasOffset.x;\n    let mousey = e.clientY - canvasOffset.y;\n    if (peeping) {\n      ctx.fillRect(0,0,500,500)\n      ctx.clearRect(mousex-90,mousey-90,180,180)\n\n\n    }\n\n  }\n\n  const throttledhandleMouseMove = throttled(50, handleMouseMove)\n\n\n\n  return (\n\n\n\n    <div className=\"PeepCanvas\" ref={parentRef}>\n\n\n\n\n\n      <canvas\n        ref={canvasRef}\n        onMouseDown={handleMouseDown}\n        onMouseUp={handleMouseUp}\n        onMouseOut={handleMouseOut}\n        onMouseMove={handleMouseMove}\n        height=\"500\" width=\"500\"\n\n\n        style={{border:\"1px solid\" }}\n\n      />\n\n    </div>\n\n  );\n\n}\n\nexport default PeepCanvas;\n"]},"metadata":{},"sourceType":"module"}