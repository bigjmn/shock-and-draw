{"ast":null,"code":"var _jsxFileName = \"/Users/jessenicholas/shock-draw-final/client/src/components/RecCanvas/RecCanvas.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport PeepCanvas from \"../PeepCanvas/PeepCanvas\";\nimport socket from '../../context/socket.js';\nimport classes from './RecCanvas.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RecCanvas = () => {\n  _s();\n\n  const canvasRef = React.useRef(null);\n  const parentRef = React.useRef(null);\n  const [ctx, setCtx] = useState({});\n  const [canvasOffset, setCanvasOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [position, setPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [color, setColor] = useState(\"#000000\");\n  const [peepingtom, setPeepingtom] = useState(false);\n\n  const handlePack = payload => {\n    ctx.strokeStyle = payload.color;\n    ctx.lineWidth = payload.thickness;\n    ctx.beginPath();\n    ctx.moveTo(payload.oldx, payload.oldy);\n    ctx.lineTo(payload.newx, payload.newy);\n    ctx.stroke();\n  };\n\n  const handleDot = payload => {\n    ctx.fillStyle = payload.color;\n    ctx.beginPath();\n    ctx.arc(payload.centerx, payload.centery, payload.thickness / 2, 0, 2 * Math.PI);\n    ctx.fill();\n    ctx.closePath();\n  };\n\n  useEffect(() => {\n    socket.on('takePacket', data => {\n      handlePack(data.payload);\n    });\n    socket.on('takeDot', data => {\n      handleDot(data.payload);\n    });\n    socket.on('takeClear', () => {\n      ctx.clearRect(0, 0, 500, 500);\n    });\n    socket.on('peepingtom', () => {\n      setPeepingtom(true);\n    });\n    socket.on('peepingtomclear', () => {\n      setPeepingtom(false);\n    });\n    return () => {\n      socket.off('takePacket');\n      socket.off('takeDot');\n      socket.off('takeClear');\n      socket.off('peepingtom');\n      socket.off('peepingtomclear');\n    };\n  });\n  useEffect(() => {\n    let canv = canvasRef.current;\n    canv.width = parentRef.current.offsetWidth;\n    canv.height = parentRef.current.offsetHeight;\n    let canvCtx = canv.getContext(\"2d\");\n    canvCtx.lineJoin = \"round\";\n    canvCtx.lineCap = \"round\";\n    canvCtx.lineWidth = 5;\n    setCtx(canvCtx);\n    let offset = canv.getBoundingClientRect();\n    setCanvasOffset({\n      x: parseInt(offset.left),\n      y: parseInt(offset.top)\n    });\n  }, [ctx]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.boardContainer,\n      ref: parentRef,\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        height: \"500\",\n        width: \"500\",\n        style: {\n          border: \"1px solid\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.peepContainer,\n      children: peepingtom && /*#__PURE__*/_jsxDEV(PeepCanvas, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 22\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RecCanvas, \"y8A81LM77TcRWWAHi5uqDyx/4J8=\");\n\n_c = RecCanvas;\nexport default RecCanvas;\n\nvar _c;\n\n$RefreshReg$(_c, \"RecCanvas\");","map":{"version":3,"sources":["/Users/jessenicholas/shock-draw-final/client/src/components/RecCanvas/RecCanvas.js"],"names":["React","useState","useEffect","PeepCanvas","socket","classes","RecCanvas","canvasRef","useRef","parentRef","ctx","setCtx","canvasOffset","setCanvasOffset","x","y","position","setPosition","color","setColor","peepingtom","setPeepingtom","handlePack","payload","strokeStyle","lineWidth","thickness","beginPath","moveTo","oldx","oldy","lineTo","newx","newy","stroke","handleDot","fillStyle","arc","centerx","centery","Math","PI","fill","closePath","on","data","clearRect","off","canv","current","width","offsetWidth","height","offsetHeight","canvCtx","getContext","lineJoin","lineCap","offset","getBoundingClientRect","parseInt","left","top","boardContainer","border","peepContainer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PeepCanvas from \"../PeepCanvas/PeepCanvas\";\nimport socket from '../../context/socket.js'\nimport classes from './RecCanvas.module.css'\n\nconst RecCanvas = () => {\n  const canvasRef = React.useRef(null);\n  const parentRef = React.useRef(null);\n  const [ctx, setCtx] = useState({});\n  const [canvasOffset, setCanvasOffset] = useState({ x: 0, y: 0 });\n\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const [color, setColor] = useState(\"#000000\");\n\n  const [peepingtom, setPeepingtom] = useState(false)\n\n\n\n  const handlePack = (payload) => {\n    ctx.strokeStyle = payload.color\n    ctx.lineWidth = payload.thickness\n    ctx.beginPath()\n    ctx.moveTo(payload.oldx, payload.oldy)\n    ctx.lineTo(payload.newx, payload.newy)\n    ctx.stroke()\n  }\n  const handleDot = (payload) => {\n    ctx.fillStyle = payload.color\n    ctx.beginPath()\n    ctx.arc(payload.centerx, payload.centery, payload.thickness/2, 0, 2*Math.PI)\n    ctx.fill()\n    ctx.closePath()\n  }\n  useEffect(() => {\n    socket.on('takePacket', (data) => {\n\n      handlePack(data.payload)\n    })\n    socket.on('takeDot', (data) => {\n      handleDot(data.payload)\n    })\n    socket.on('takeClear', () => {\n      ctx.clearRect(0,0,500,500)\n    })\n    socket.on('peepingtom', () => {\n      setPeepingtom(true)\n    })\n    socket.on('peepingtomclear', () => {\n      setPeepingtom(false)\n    })\n    return () => {\n      socket.off('takePacket')\n      socket.off('takeDot')\n      socket.off('takeClear')\n      socket.off('peepingtom')\n      socket.off('peepingtomclear')\n    }\n  })\n\n\n  useEffect(() => {\n    let canv = canvasRef.current;\n    canv.width = parentRef.current.offsetWidth;\n    canv.height = parentRef.current.offsetHeight;\n\n    let canvCtx = canv.getContext(\"2d\");\n    canvCtx.lineJoin = \"round\";\n    canvCtx.lineCap = \"round\";\n    canvCtx.lineWidth = 5;\n    setCtx(canvCtx);\n\n    let offset = canv.getBoundingClientRect();\n    setCanvasOffset({ x: parseInt(offset.left), y: parseInt(offset.top) });\n  }, [ctx]);\n\n\n\n  return (\n    <div>\n\n\n\n\n    <div className={classes.boardContainer} ref={parentRef}>\n\n\n\n      <canvas\n        ref={canvasRef}\n\n\n        height=\"500\" width=\"500\"\n\n\n        style={{border:\"1px solid\"}}\n\n      />\n\n\n    </div>\n    <div className={classes.peepContainer}>\n      {peepingtom && <PeepCanvas />}\n    </div>\n    </div>\n\n  );\n\n}\n\nexport default RecCanvas;\n"]},"metadata":{},"sourceType":"module"}