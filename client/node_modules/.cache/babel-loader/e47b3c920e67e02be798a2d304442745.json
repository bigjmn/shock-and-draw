{"ast":null,"code":"import _slicedToArray from\"/Users/jessenicholas/shock-draw-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import PeepCanvas from\"../PeepCanvas/PeepCanvas\";import socket from'../../context/socket.js';import classes from'./RecCanvas.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RecCanvas=function RecCanvas(_ref){var word=_ref.word;var canvasRef=React.useRef(null);var parentRef=React.useRef(null);var _useState=useState({}),_useState2=_slicedToArray(_useState,2),ctx=_useState2[0],setCtx=_useState2[1];var _useState3=useState({x:0,y:0}),_useState4=_slicedToArray(_useState3,2),canvasOffset=_useState4[0],setCanvasOffset=_useState4[1];var _useState5=useState({x:0,y:0}),_useState6=_slicedToArray(_useState5,2),position=_useState6[0],setPosition=_useState6[1];var _useState7=useState(\"#000000\"),_useState8=_slicedToArray(_useState7,2),color=_useState8[0],setColor=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),peepingtom=_useState10[0],setPeepingtom=_useState10[1];var handlePack=function handlePack(payload){ctx.strokeStyle=payload.color;ctx.lineWidth=payload.thickness;ctx.beginPath();ctx.moveTo(payload.oldx,payload.oldy);ctx.lineTo(payload.newx,payload.newy);ctx.stroke();};var handleDot=function handleDot(payload){ctx.fillStyle=payload.color;ctx.beginPath();ctx.arc(payload.centerx,payload.centery,payload.thickness/2,0,2*Math.PI);ctx.fill();ctx.closePath();};var correctSign=function correctSign(){ctx.fillStyle='black';ctx.fillRect(90,90,320,220);ctx.fillStyle='white';ctx.fillRect(100,100,300,200);ctx.fillStyle='black';ctx.font='bold 42px serif';ctx.textAlign='center';ctx.fillText('correct!',250,140);ctx.fillStyle='green';ctx.font='bold 42px serif';ctx.fillText(word+' ✔',250,260);};useEffect(function(){socket.on('takePacket',function(data){handlePack(data.payload);});socket.on('takeDot',function(data){handleDot(data.payload);});socket.on('takeClear',function(){ctx.clearRect(0,0,500,500);});socket.on('peepingtom',function(){setPeepingtom(true);});socket.on('peepingtomclear',function(){setPeepingtom(false);});socket.on('correct',function(){correctSign();});return function(){socket.off('takePacket');socket.off('takeDot');socket.off('takeClear');socket.off('peepingtom');socket.off('peepingtomclear');socket.off('correct');};});useEffect(function(){var canv=canvasRef.current;canv.width=parentRef.current.offsetWidth;canv.height=parentRef.current.offsetHeight;var canvCtx=canv.getContext(\"2d\");canvCtx.lineJoin=\"round\";canvCtx.lineCap=\"round\";canvCtx.lineWidth=5;setCtx(canvCtx);var offset=canv.getBoundingClientRect();setCanvasOffset({x:parseInt(offset.left),y:parseInt(offset.top)});},[ctx]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:classes.boardContainer,ref:parentRef,children:/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,height:\"500\",width:\"500\",style:{border:\"1px solid\"}})}),/*#__PURE__*/_jsx(\"div\",{className:classes.peepContainer,children:peepingtom&&/*#__PURE__*/_jsx(PeepCanvas,{})})]});};export default RecCanvas;","map":{"version":3,"sources":["/Users/jessenicholas/shock-draw-final/client/src/components/RecCanvas/RecCanvas.js"],"names":["React","useState","useEffect","PeepCanvas","socket","classes","RecCanvas","word","canvasRef","useRef","parentRef","ctx","setCtx","x","y","canvasOffset","setCanvasOffset","position","setPosition","color","setColor","peepingtom","setPeepingtom","handlePack","payload","strokeStyle","lineWidth","thickness","beginPath","moveTo","oldx","oldy","lineTo","newx","newy","stroke","handleDot","fillStyle","arc","centerx","centery","Math","PI","fill","closePath","correctSign","fillRect","font","textAlign","fillText","on","data","clearRect","off","canv","current","width","offsetWidth","height","offsetHeight","canvCtx","getContext","lineJoin","lineCap","offset","getBoundingClientRect","parseInt","left","top","boardContainer","border","peepContainer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PeepCanvas from \"../PeepCanvas/PeepCanvas\";\nimport socket from '../../context/socket.js'\nimport classes from './RecCanvas.module.css'\n\nconst RecCanvas = ({word}) => {\n  const canvasRef = React.useRef(null);\n  const parentRef = React.useRef(null);\n  const [ctx, setCtx] = useState({});\n  const [canvasOffset, setCanvasOffset] = useState({ x: 0, y: 0 });\n\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const [color, setColor] = useState(\"#000000\");\n\n  const [peepingtom, setPeepingtom] = useState(false)\n\n\n\n  const handlePack = (payload) => {\n    ctx.strokeStyle = payload.color\n    ctx.lineWidth = payload.thickness\n    ctx.beginPath()\n    ctx.moveTo(payload.oldx, payload.oldy)\n    ctx.lineTo(payload.newx, payload.newy)\n    ctx.stroke()\n  }\n  const handleDot = (payload) => {\n    ctx.fillStyle = payload.color\n    ctx.beginPath()\n    ctx.arc(payload.centerx, payload.centery, payload.thickness/2, 0, 2*Math.PI)\n    ctx.fill()\n    ctx.closePath()\n  }\n  const correctSign = () => {\n    ctx.fillStyle = 'black'\n    ctx.fillRect(90, 90, 320, 220)\n    ctx.fillStyle = 'white'\n    ctx.fillRect(100,100,300,200)\n    ctx.fillStyle = 'black'\n    ctx.font = 'bold 42px serif'\n    ctx.textAlign = 'center'\n    ctx.fillText('correct!', 250, 140)\n    ctx.fillStyle = 'green'\n    ctx.font = 'bold 42px serif'\n    ctx.fillText(word+' ✔', 250, 260)\n  }\n  useEffect(() => {\n    socket.on('takePacket', (data) => {\n\n      handlePack(data.payload)\n    })\n    socket.on('takeDot', (data) => {\n      handleDot(data.payload)\n    })\n    socket.on('takeClear', () => {\n      ctx.clearRect(0,0,500,500)\n    })\n    socket.on('peepingtom', () => {\n      setPeepingtom(true)\n    })\n    socket.on('peepingtomclear', () => {\n      setPeepingtom(false)\n    })\n    socket.on('correct', () => {\n      correctSign()\n    })\n    return () => {\n      socket.off('takePacket')\n      socket.off('takeDot')\n      socket.off('takeClear')\n      socket.off('peepingtom')\n      socket.off('peepingtomclear')\n      socket.off('correct')\n    }\n  })\n\n\n  useEffect(() => {\n    let canv = canvasRef.current;\n    canv.width = parentRef.current.offsetWidth;\n    canv.height = parentRef.current.offsetHeight;\n\n    let canvCtx = canv.getContext(\"2d\");\n    canvCtx.lineJoin = \"round\";\n    canvCtx.lineCap = \"round\";\n    canvCtx.lineWidth = 5;\n    setCtx(canvCtx);\n\n    let offset = canv.getBoundingClientRect();\n    setCanvasOffset({ x: parseInt(offset.left), y: parseInt(offset.top) });\n  }, [ctx]);\n\n\n\n\n\n  return (\n    <div>\n\n\n\n\n    <div className={classes.boardContainer} ref={parentRef}>\n\n\n\n      <canvas\n        ref={canvasRef}\n\n\n        height=\"500\" width=\"500\"\n\n\n        style={{border:\"1px solid\"}}\n\n      />\n\n\n\n    </div>\n    <div className={classes.peepContainer}>\n      {peepingtom && <PeepCanvas />}\n    </div>\n\n    </div>\n\n  );\n\n}\n\nexport default RecCanvas;\n"]},"metadata":{},"sourceType":"module"}