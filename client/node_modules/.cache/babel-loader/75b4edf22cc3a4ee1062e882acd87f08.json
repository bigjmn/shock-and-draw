{"ast":null,"code":"import _slicedToArray from\"/Users/jessenicholas/shock-draw-final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import PeepCanvas from\"../PeepCanvas/PeepCanvas\";import socket from'../../context/socket.js';import classes from'./RecCanvas.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RecCanvas=function RecCanvas(){var canvasRef=React.useRef(null);var parentRef=React.useRef(null);var _useState=useState({}),_useState2=_slicedToArray(_useState,2),ctx=_useState2[0],setCtx=_useState2[1];var _useState3=useState({x:0,y:0}),_useState4=_slicedToArray(_useState3,2),canvasOffset=_useState4[0],setCanvasOffset=_useState4[1];var _useState5=useState({x:0,y:0}),_useState6=_slicedToArray(_useState5,2),position=_useState6[0],setPosition=_useState6[1];var _useState7=useState(\"#000000\"),_useState8=_slicedToArray(_useState7,2),color=_useState8[0],setColor=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),peepingtom=_useState10[0],setPeepingtom=_useState10[1];var handlePack=function handlePack(payload){ctx.strokeStyle=payload.color;ctx.lineWidth=payload.thickness;ctx.beginPath();ctx.moveTo(payload.oldx,payload.oldy);ctx.lineTo(payload.newx,payload.newy);ctx.stroke();};useEffect(function(){socket.on('takePacket',function(data){handlePack(data.payload);});socket.on('takeClear',function(){ctx.clearRect(0,0,500,500);});socket.on('peepingtom',function(){setPeepingtom(true);});socket.on('peepingtomclear',function(){setPeepingtom(false);});return function(){socket.off('takePacket');socket.off('takeClear');socket.off('peepingtom');socket.off('peepingtomclear');};});useEffect(function(){var canv=canvasRef.current;canv.width=parentRef.current.offsetWidth;canv.height=parentRef.current.offsetHeight;var canvCtx=canv.getContext(\"2d\");canvCtx.lineJoin=\"round\";canvCtx.lineCap=\"round\";canvCtx.lineWidth=5;setCtx(canvCtx);var offset=canv.getBoundingClientRect();setCanvasOffset({x:parseInt(offset.left),y:parseInt(offset.top)});},[ctx]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:classes.boardContainer,ref:parentRef,children:/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,height:\"500\",width:\"500\",style:{border:\"1px solid\"}})}),/*#__PURE__*/_jsx(\"div\",{className:classes.peepContainer,children:peepingtom&&/*#__PURE__*/_jsx(PeepCanvas,{})})]});};export default RecCanvas;","map":{"version":3,"sources":["/Users/jessenicholas/shock-draw-final/client/src/components/RecCanvas/RecCanvas.js"],"names":["React","useState","useEffect","PeepCanvas","socket","classes","RecCanvas","canvasRef","useRef","parentRef","ctx","setCtx","x","y","canvasOffset","setCanvasOffset","position","setPosition","color","setColor","peepingtom","setPeepingtom","handlePack","payload","strokeStyle","lineWidth","thickness","beginPath","moveTo","oldx","oldy","lineTo","newx","newy","stroke","on","data","clearRect","off","canv","current","width","offsetWidth","height","offsetHeight","canvCtx","getContext","lineJoin","lineCap","offset","getBoundingClientRect","parseInt","left","top","boardContainer","border","peepContainer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PeepCanvas from \"../PeepCanvas/PeepCanvas\";\nimport socket from '../../context/socket.js'\nimport classes from './RecCanvas.module.css'\n\nconst RecCanvas = () => {\n  const canvasRef = React.useRef(null);\n  const parentRef = React.useRef(null);\n  const [ctx, setCtx] = useState({});\n  const [canvasOffset, setCanvasOffset] = useState({ x: 0, y: 0 });\n\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const [color, setColor] = useState(\"#000000\");\n\n  const [peepingtom, setPeepingtom] = useState(false)\n\n\n\n  const handlePack = (payload) => {\n    ctx.strokeStyle = payload.color\n    ctx.lineWidth = payload.thickness\n    ctx.beginPath()\n    ctx.moveTo(payload.oldx, payload.oldy)\n    ctx.lineTo(payload.newx, payload.newy)\n    ctx.stroke()\n  }\n  useEffect(() => {\n    socket.on('takePacket', (data) => {\n\n      handlePack(data.payload)\n    })\n    socket.on('takeClear', () => {\n      ctx.clearRect(0,0,500,500)\n    })\n    socket.on('peepingtom', () => {\n      setPeepingtom(true)\n    })\n    socket.on('peepingtomclear', () => {\n      setPeepingtom(false)\n    })\n    return () => {\n      socket.off('takePacket')\n      socket.off('takeClear')\n      socket.off('peepingtom')\n      socket.off('peepingtomclear')\n    }\n  })\n\n\n  useEffect(() => {\n    let canv = canvasRef.current;\n    canv.width = parentRef.current.offsetWidth;\n    canv.height = parentRef.current.offsetHeight;\n\n    let canvCtx = canv.getContext(\"2d\");\n    canvCtx.lineJoin = \"round\";\n    canvCtx.lineCap = \"round\";\n    canvCtx.lineWidth = 5;\n    setCtx(canvCtx);\n\n    let offset = canv.getBoundingClientRect();\n    setCanvasOffset({ x: parseInt(offset.left), y: parseInt(offset.top) });\n  }, [ctx]);\n\n\n\n  return (\n    <div>\n\n\n\n\n    <div className={classes.boardContainer} ref={parentRef}>\n\n\n\n      <canvas\n        ref={canvasRef}\n\n\n        height=\"500\" width=\"500\"\n\n\n        style={{border:\"1px solid\"}}\n\n      />\n\n\n    </div>\n    <div className={classes.peepContainer}>\n      {peepingtom && <PeepCanvas />}\n    </div>\n    </div>\n\n  );\n\n}\n\nexport default RecCanvas;\n"]},"metadata":{},"sourceType":"module"}